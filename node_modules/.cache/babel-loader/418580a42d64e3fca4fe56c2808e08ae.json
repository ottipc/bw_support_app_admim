{"ast":null,"code":"import _objectSpread from\"/home/codi/Entwicklung/workspace-webstorm/idendity-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/codi/Entwicklung/workspace-webstorm/idendity-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/codi/Entwicklung/workspace-webstorm/idendity-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/codi/Entwicklung/workspace-webstorm/idendity-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/codi/Entwicklung/workspace-webstorm/idendity-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectWithoutProperties from\"/home/codi/Entwicklung/workspace-webstorm/idendity-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{Component,Children,cloneElement,Fragment}from'react';import shouldUpdate from'recompose/shouldUpdate';import{withRouter}from'react-router-dom';import compose from'recompose/compose';import{withStyles}from'@material-ui/core/styles';import{Link,linkToRecord}from'react-admin';/**\n * style\n *\n * @type {{link: {cursor: string, \"& *\": {cursor: string}}}}\n */var styles={link:{cursor:'pointer','& *':{cursor:'pointer'}}};/**\n *\n * @param link\n * @param rest\n * @returns {*}\n */var sanitizeRestClasses=function sanitizeRestClasses(_ref){var link=_ref.link,rest=_objectWithoutProperties(_ref,[\"link\"]);return rest;};/**\n *\n * @param classes\n * @param to\n * @param relative\n * @param disabled\n * @param history\n * @param location\n * @param match\n * @param staticContext\n * @param rest\n * @returns {*}\n */var sanitizeRestProps=function sanitizeRestProps(_ref2){var classes=_ref2.classes,to=_ref2.to,relative=_ref2.relative,disabled=_ref2.disabled,history=_ref2.history,location=_ref2.location,match=_ref2.match,staticContext=_ref2.staticContext,rest=_objectWithoutProperties(_ref2,[\"classes\",\"to\",\"relative\",\"disabled\",\"history\",\"location\",\"match\",\"staticContext\"]);return rest;};var LinkAnyFieldButton=/*#__PURE__*/function(_Component){_inherits(LinkAnyFieldButton,_Component);var _super=_createSuper(LinkAnyFieldButton);function LinkAnyFieldButton(){_classCallCheck(this,LinkAnyFieldButton);return _super.apply(this,arguments);}_createClass(LinkAnyFieldButton,[{key:\"render\",value:function render(){var _this$props=this.props,_this$props$basepath=_this$props.basepath,basepath=_this$props$basepath===void 0?'':_this$props$basepath,children=_this$props.children,_this$props$record=_this$props.record,record=_this$props$record===void 0?{}:_this$props$record,classes=_this$props.classes,to=_this$props.to,relative=_this$props.relative,disabled=_this$props.disabled,match=_this$props.match;var recordLink=to.startsWith('/')?to.replace(/\\/:([\\w-]+)/g,function(m,param){return\"/\".concat(record[param]);}):linkToRecord(basepath,record.id,to);var completeTo=relative?\"\".concat(match.url).concat(recordLink):recordLink;var rest=sanitizeRestProps(this.props);var restClasses=sanitizeRestClasses(classes);var isDisabled=typeof disabled==='function'?disabled(record):disabled;var countChildren=Children.count(children);var childElements=countChildren===1?cloneElement(children,{record:record,basepath:basepath,classes:restClasses}):Children.map(children,function(field){return cloneElement(field,_objectSpread({record:record,basepath:basepath,classes:restClasses},rest));});return isDisabled?/*#__PURE__*/React.createElement(Fragment,null,childElements):/*#__PURE__*/React.createElement(Link,{to:\"\".concat(completeTo),className:classes.link},childElements);}}]);return LinkAnyFieldButton;}(Component);/**\n *\n *  add props: history, location, match, staticContext\n *  add style\n *\n *  @param props\n *  @param nextProps\n *\n */LinkAnyFieldButton.defaultProps={to:'show'};var enhance=compose(withRouter,// adds props: history, location, match, staticContext\nwithStyles(styles),shouldUpdate(function(props,nextProps){return props.translate!==nextProps.translate||props.record&&nextProps.record&&props.record.id!==nextProps.record.id||props.basePath!==nextProps.basePath||props.record==null&&nextProps.record!=null;}));export default enhance(LinkAnyFieldButton);","map":{"version":3,"sources":["/home/codi/Entwicklung/workspace-webstorm/idendity-admin/src/comp/linkAnyFieldButton.js"],"names":["React","Component","Children","cloneElement","Fragment","shouldUpdate","withRouter","compose","withStyles","Link","linkToRecord","styles","link","cursor","sanitizeRestClasses","rest","sanitizeRestProps","classes","to","relative","disabled","history","location","match","staticContext","LinkAnyFieldButton","props","basepath","children","record","recordLink","startsWith","replace","m","param","id","completeTo","url","restClasses","isDisabled","countChildren","count","childElements","map","field","defaultProps","enhance","nextProps","translate","basePath"],"mappings":"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","sourcesContent":["import React, { Component, Children, cloneElement, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport shouldUpdate from 'recompose/shouldUpdate';\nimport { withRouter } from 'react-router-dom';\nimport compose from 'recompose/compose';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Link, linkToRecord } from 'react-admin';\n\n/**\n * style\n *\n * @type {{link: {cursor: string, \"& *\": {cursor: string}}}}\n */\nconst styles = {\n    link: {\n        cursor: 'pointer',\n        '& *': {\n            cursor: 'pointer',\n        },\n    },\n};\n/**\n *\n * @param link\n * @param rest\n * @returns {*}\n */\nconst sanitizeRestClasses = ({ link, ...rest }) => rest;\n\n/**\n *\n * @param classes\n * @param to\n * @param relative\n * @param disabled\n * @param history\n * @param location\n * @param match\n * @param staticContext\n * @param rest\n * @returns {*}\n */\nconst sanitizeRestProps = ({\n                               classes,\n                               to,\n                               relative,\n                               disabled,\n                               history,\n                               location,\n                               match,\n                               staticContext,\n                               ...rest\n                           }) => rest;\n\n\nclass LinkAnyFieldButton extends Component {\n    static propTypes = {\n        // passed by parent\n        basepath: PropTypes.string,\n        children: PropTypes.any,\n        record: PropTypes.object,\n        classes: PropTypes.object,\n        // own props\n        to: PropTypes.string,\n        relative: PropTypes.bool,\n        disabled: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\n        // withRouter props\n        match: PropTypes.object,\n    };\n    static defaultProps = {\n        to: 'show',\n    };\n\n    render() {\n        const {\n            basepath = '',\n            children,\n            record = {},\n            classes,\n            to,\n            relative,\n            disabled,\n            match,\n        } = this.props;\n\n        const recordLink = to.startsWith('/')\n            ? to.replace(/\\/:([\\w-]+)/g, (m, param) => {\n                return `/${record[param]}`;\n            })\n            : linkToRecord(basepath, record.id, to);\n        const completeTo = relative ? `${match.url}${recordLink}` : recordLink;\n        const rest = sanitizeRestProps(this.props);\n        const restClasses = sanitizeRestClasses(classes);\n        const isDisabled =\n            typeof disabled === 'function' ? disabled(record) : disabled;\n\n        const countChildren = Children.count(children);\n\n        const childElements =\n            countChildren === 1\n                ? cloneElement(children, {\n                    record,\n                    basepath,\n                    classes: restClasses,\n                })\n                : Children.map(children, field =>\n                    cloneElement(field, {\n                        record,\n                        basepath,\n                        classes: restClasses,\n                        ...rest,\n                    })\n                );\n\n        return isDisabled ? (\n            <Fragment>{childElements}</Fragment>\n        ) : (\n            <Link to={`${completeTo}`} className={classes.link}>\n                {childElements}\n            </Link>\n        );\n    }\n}\n\n/**\n *\n *  add props: history, location, match, staticContext\n *  add style\n *\n *  @param props\n *  @param nextProps\n *\n */\nconst enhance = compose(\n    withRouter, // adds props: history, location, match, staticContext\n    withStyles(styles),\n    shouldUpdate(\n        (props, nextProps) =>\n            props.translate !== nextProps.translate ||\n            (props.record &&\n                nextProps.record &&\n                props.record.id !== nextProps.record.id) ||\n            props.basePath !== nextProps.basePath ||\n            (props.record == null && nextProps.record != null)\n    )\n);\n\nexport default enhance(LinkAnyFieldButton);\n"]},"metadata":{},"sourceType":"module"}