{"ast":null,"code":"import { fetchUtils } from 'react-admin';\nimport postgrestRestProvider from \"@raphiniert/ra-data-postgrest\";\n\nrequire('dotenv').config();\n\nconst API_URL = process.env.NODE_ENV === 'production' ? process.env.REACT_APP_PROD_API_URL : process.env.REACT_APP_DEV_API_URL;\n/**\n *\n * dataProvider configurations\n *  Authorization Token for the API\n *\n * @param url\n * @param options\n * @returns {Promise<{status: number; headers: Headers; body: string; json: any}>}\n */\n\nconst httpClient = (url, options = {}) => {\n  if (!options.headers) {\n    options.headers = new Headers({\n      Accept: 'application/json'\n    });\n  }\n\n  options.headers.set('Content-Type', `application/json`);\n  options.headers.set('Access-Control-Expose-Headers', `Content-Range`);\n  options.headers.set('Access-Control-Expose-Headers', `X-Total-Count`);\n  options.headers.set('X-Total-Count', `5000`);\n  options.headers.set('Prefer', `count=exact`);\n  options.headers.delete('Accept');\n  options.headers.set('Authorization', process.env.REACT_APP_API_KEY);\n  return fetchUtils.fetchJson(url, options);\n};\n/**\n * send the Authorization Token in header\n * @type {DataProvider}\n */\n\n\nconsole.log(\"-----------------------\");\nconsole.log(API_URL);\nconsole.log(\"-----------------------\");\nconst dataProvider = postgrestRestProvider(API_URL, httpClient);\n\nfunction buildAndQuery(prop, params) {\n  let querystring = \"\";\n\n  for (prop in params.filter) {\n    console.log(\"PROPERTY : \" + prop);\n    console.log(\"VALUE : \" + params.filter[prop]);\n    querystring = \"&\" + prop + \"=eq.\" + params.filter[prop];\n  }\n\n  return querystring;\n}\n/**\n *\n * Extending the Dataprovider Functionality to build OR Queries on the Api.\n * The function takes a list of params and their keys to query the specified table with an or.\n *\n * @type {{[p: string]: any, deleteMany: (resource: string, params: DeleteManyParams) => Promise<DeleteManyResult>, updateMany: (resource: string, params: UpdateManyParams) => Promise<UpdateManyResult>, getList: (resource: string, params: GetListParams) => Promise<GetListResult>, getMany: (resource: string, params: GetManyParams) => Promise<GetManyResult>, getManyReference: (resource: string, params: GetManyReferenceParams) => Promise<GetManyReferenceResult>, getOne: (resource: string, params: GetOneParams) => Promise<GetOneResult>, update: (resource: string, params: UpdateParams) => Promise<UpdateResult>, create: (resource: string, params: CreateParams) => Promise<CreateResult>, getManyOr: (function(*, *): Promise<{data: *}>), delete: (resource: string, params: DeleteParams) => Promise<DeleteResult>}}\n */\n\n\nconst myDataProvider = { ...dataProvider,\n\n  /*getList: (resource, params) => {\n      const { page, perPage } = params.pagination;\n      const { field, order } = params.sort;\n      const query = {\n          sort: JSON.stringify([field, order]),\n          range: JSON.stringify([(page - 1) * perPage, page * perPage - 1]),\n          filter: JSON.stringify(params.filter),\n      };\n      const url = `${API_URL}/${resource}?${JSON.stringify(query)}`;\n       return httpClient(url).then(({ headers, json }) => ({\n  //            data: json,\n          data: json.map(resource => ({ ...resource, id: resource.addressid }) ),\n          total: parseInt(headers.get('content-range').split('/').pop(), 10),\n      }));\n  },*/\n  getList: function (resource, params) {\n    console.log(\"IN GET LIST\");\n    console.log(\"PARAMS : \" + JSON.stringify(params));\n    const {\n      page,\n      perPage\n    } = params.pagination;\n    const {\n      field,\n      order\n    } = params.sort;\n    console.log(\"PER PAGE : \" + perPage);\n    console.log(\"FIELD : \" + field);\n    console.log(\"ORDER : \" + order);\n    console.log(\"PAGE : \" + page);\n    console.log(\"FILTER : \" + JSON.stringify(params.filter));\n    let limit = perPage;\n    let offset = (page - 1) * perPage;\n    let prop; //let headers = {};\n\n    let options = {};\n    options.headers = new Headers({\n      'Prefer': 'count=exact'\n    });\n    options.headers.set('Prefer', `count=exact`); //let shit = httpClient(url, options).then(function (_ab) {\n    //            console.log(\"COUNT RESPONSE : \" + JSON.stringify(_ab));\n    //            return  _ab;\n    //});\n\n    let querystring = buildAndQuery(prop, params);\n    var responseheaders = {};\n    let url = API_URL + \"/\" + resource + \"?limit=\" + limit + \"&offset=\" + offset + querystring; //let url = API_URL + \"/\" + resource;\n\n    console.log(\"URL : \" + url);\n    return httpClient(url, options).then(response => {\n      responseheaders = response.headers;\n      let contentrange = [0, 100];\n\n      for (var pair of response.headers.entries()) {\n        console.log(pair[0] + ': ' + pair[1]);\n\n        if (pair[0] === 'content-range') {\n          contentrange = pair[1].split('/');\n          console.log(\"PAIR : \" + pair[1]);\n          console.log(\"RANGE AFTER SPLIT : \" + contentrange);\n        }\n      }\n\n      let jsondata = response.json; //console.log(\"RESPONSE : \" + JSON.stringify(responseheaders));\n      //console.log(\"RESOURCE : \" + resource);\n\n      if (resource === \"user_all\") {//FIXME Maybe we dont need the .replace\n        //jsondata = JSON.parse(JSON.stringify(jsondata).replace(\"\\\"id\\\":\", \"\\\"addressid\\\":\")).map(resource => ({ ...resource, id: resource.addressid }));\n      }\n\n      console.log(\"JOSN : \" + JSON.stringify(jsondata)); //let totalamount = parseInt(headers.get('content-range').split('/').pop(), 10);\n\n      console.log(\"AMOUNT : \" + contentrange[1]);\n      var totalcount = parseInt(contentrange[1]);\n      return {\n        data: jsondata,\n        total: totalcount\n      };\n    });\n  },\n  getOne: function (resource, params) {\n    console.log(\"IN GET ONE\");\n    let url = API_URL + \"/\" + resource + \"?id=eq.\" + params.id;\n\n    if (resource === \"user_all\") {\n      url = API_URL + \"/\" + resource + \"?addressid=eq.\" + params.id;\n    }\n\n    console.log(\"IN GET ONE URL : \" + url);\n    return httpClient(url).then(function (_a) {\n      let json = _a.json;\n      console.log(\"RESOURCE GET ONE : \" + resource);\n\n      if (resource === \"user_all\") {\n        json = JSON.parse(JSON.stringify(_a.json).replace(\"\\\"id\\\":\", \"\\\"addressid\\\":\")).map(resource => ({ ...resource,\n          id: resource.addressid\n        }));\n      }\n\n      console.log(\"JOSN GET ONE: \" + JSON.stringify(json));\n      return {\n        data: json\n      };\n    });\n  },\n  getManyOr: function (resource, params) {\n    let prop;\n    let queryparam;\n    let queryValues = [];\n\n    for (prop in params) {\n      if (params.hasOwnProperty(prop)) {\n        let key = prop;\n        let valueArray = params[key];\n\n        for (queryparam in valueArray) {\n          let queryString = key + \".eq.\" + valueArray[queryparam];\n          queryValues.push(queryString);\n        }\n      }\n    }\n\n    let queryids = queryValues.join(\",\");\n    let queerystring = !queryids ? \"id=eq.-1\" : \"or=(\" + queryids + \")\";\n\n    if (resource === \"user_all\") {\n      queerystring = !queryids ? \"addressid=eq.-1\" : \"or=(\" + queryids + \")\";\n    }\n\n    let url = API_URL + \"/\" + resource + \"?\" + queerystring;\n    return httpClient(url).then(function (_a) {\n      var json = _a.json;\n      return {\n        data: json\n      };\n    });\n  }\n};\nexport default myDataProvider;","map":{"version":3,"sources":["/home/codi/Entwicklung/workspace-webstorm/idendity-admin/src/api/dataProvider.js"],"names":["fetchUtils","postgrestRestProvider","require","config","API_URL","process","env","NODE_ENV","REACT_APP_PROD_API_URL","REACT_APP_DEV_API_URL","httpClient","url","options","headers","Headers","Accept","set","delete","REACT_APP_API_KEY","fetchJson","console","log","dataProvider","buildAndQuery","prop","params","querystring","filter","myDataProvider","getList","resource","JSON","stringify","page","perPage","pagination","field","order","sort","limit","offset","responseheaders","then","response","contentrange","pair","entries","split","jsondata","json","totalcount","parseInt","data","total","getOne","id","_a","parse","replace","map","addressid","getManyOr","queryparam","queryValues","hasOwnProperty","key","valueArray","queryString","push","queryids","join","queerystring"],"mappings":"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","sourcesContent":["import {fetchUtils} from 'react-admin';\nimport postgrestRestProvider from \"@raphiniert/ra-data-postgrest\";\nrequire('dotenv').config();\nconst API_URL = process.env.NODE_ENV === 'production' ? process.env.REACT_APP_PROD_API_URL : process.env.REACT_APP_DEV_API_URL;\n\n\n/**\n *\n * dataProvider configurations\n *  Authorization Token for the API\n *\n * @param url\n * @param options\n * @returns {Promise<{status: number; headers: Headers; body: string; json: any}>}\n */\nconst httpClient = (url, options = {}) => {\n    if (!options.headers) {\n        options.headers = new Headers({Accept: 'application/json'});\n    }\n    options.headers.set('Content-Type', `application/json`);\n    options.headers.set('Access-Control-Expose-Headers', `Content-Range`);\n    options.headers.set('Access-Control-Expose-Headers', `X-Total-Count`);\n    options.headers.set('X-Total-Count', `5000`);\n    options.headers.set('Prefer', `count=exact`);\n    options.headers.delete('Accept');\n    options.headers.set('Authorization', process.env.REACT_APP_API_KEY);\n    return fetchUtils.fetchJson(url, options);\n\n};\n\n\n/**\n * send the Authorization Token in header\n * @type {DataProvider}\n */\n\nconsole.log(\"-----------------------\");\nconsole.log(API_URL);\nconsole.log(\"-----------------------\");\n\nconst dataProvider = postgrestRestProvider(API_URL, httpClient);\n\nfunction buildAndQuery(prop, params) {\n    let querystring = \"\";\n    for (prop in params.filter) {\n        console.log(\"PROPERTY : \" + prop);\n        console.log(\"VALUE : \" + params.filter[prop]);\n        querystring = \"&\" + prop + \"=eq.\" + params.filter[prop];\n    }\n    return querystring;\n}\n\n/**\n *\n * Extending the Dataprovider Functionality to build OR Queries on the Api.\n * The function takes a list of params and their keys to query the specified table with an or.\n *\n * @type {{[p: string]: any, deleteMany: (resource: string, params: DeleteManyParams) => Promise<DeleteManyResult>, updateMany: (resource: string, params: UpdateManyParams) => Promise<UpdateManyResult>, getList: (resource: string, params: GetListParams) => Promise<GetListResult>, getMany: (resource: string, params: GetManyParams) => Promise<GetManyResult>, getManyReference: (resource: string, params: GetManyReferenceParams) => Promise<GetManyReferenceResult>, getOne: (resource: string, params: GetOneParams) => Promise<GetOneResult>, update: (resource: string, params: UpdateParams) => Promise<UpdateResult>, create: (resource: string, params: CreateParams) => Promise<CreateResult>, getManyOr: (function(*, *): Promise<{data: *}>), delete: (resource: string, params: DeleteParams) => Promise<DeleteResult>}}\n */\nconst myDataProvider = {\n    ...dataProvider,\n    /*getList: (resource, params) => {\n        const { page, perPage } = params.pagination;\n        const { field, order } = params.sort;\n        const query = {\n            sort: JSON.stringify([field, order]),\n            range: JSON.stringify([(page - 1) * perPage, page * perPage - 1]),\n            filter: JSON.stringify(params.filter),\n        };\n        const url = `${API_URL}/${resource}?${JSON.stringify(query)}`;\n\n        return httpClient(url).then(({ headers, json }) => ({\n//            data: json,\n            data: json.map(resource => ({ ...resource, id: resource.addressid }) ),\n            total: parseInt(headers.get('content-range').split('/').pop(), 10),\n        }));\n    },*/\n\n\n\n    getList: function (resource, params) {\n        console.log(\"IN GET LIST\");\n        console.log(\"PARAMS : \" + JSON.stringify(params));\n        const { page, perPage } = params.pagination;\n        const { field, order } = params.sort;\n        console.log(\"PER PAGE : \" + perPage);\n        console.log(\"FIELD : \" + field);\n        console.log(\"ORDER : \" + order);\n        console.log(\"PAGE : \" + page);\n        console.log(\"FILTER : \" + JSON.stringify(params.filter));\n        let limit = perPage;\n        let offset = (page - 1) * perPage;\n        let prop;\n\n\n        //let headers = {};\n        let options={};\n        options.headers = new Headers({'Prefer': 'count=exact'});\n        options.headers.set('Prefer', `count=exact`);\n        //let shit = httpClient(url, options).then(function (_ab) {\n        //            console.log(\"COUNT RESPONSE : \" + JSON.stringify(_ab));\n        //            return  _ab;\n        //});\n\n\n        let querystring = buildAndQuery(prop, params);\n        var responseheaders = {};\n\n        let url = API_URL + \"/\" + resource + \"?limit=\" + limit + \"&offset=\" + offset + querystring;\n        //let url = API_URL + \"/\" + resource;\n        console.log(\"URL : \" + url);\n        return httpClient(url, options).then((response) => {\n            responseheaders = response.headers;\n            let contentrange = [0,100];\n            for (var pair of response.headers.entries()) {\n                console.log(pair[0]+ ': '+ pair[1]);\n                if(pair[0]==='content-range'){\n                    contentrange = pair[1].split('/');\n                    console.log(\"PAIR : \" + pair[1]);\n                    console.log(\"RANGE AFTER SPLIT : \" + contentrange);\n                }\n            }\n            let jsondata = response.json;\n            //console.log(\"RESPONSE : \" + JSON.stringify(responseheaders));\n\n            //console.log(\"RESOURCE : \" + resource);\n\n            if(resource===\"user_all\"){\n                //FIXME Maybe we dont need the .replace\n                //jsondata = JSON.parse(JSON.stringify(jsondata).replace(\"\\\"id\\\":\", \"\\\"addressid\\\":\")).map(resource => ({ ...resource, id: resource.addressid }));\n            }\n            console.log(\"JOSN : \" + JSON.stringify(jsondata));\n            //let totalamount = parseInt(headers.get('content-range').split('/').pop(), 10);\n            console.log(\"AMOUNT : \" + contentrange[1]);\n            var totalcount = parseInt(contentrange[1]);\n            return ({data: jsondata, total: totalcount});\n        })\n    },\n\n    getOne: function (resource, params) {\n      console.log(\"IN GET ONE\");\n\n      let url = API_URL + \"/\" + resource + \"?id=eq.\" + params.id;\n      if(resource===\"user_all\"){\n        url = API_URL + \"/\" + resource + \"?addressid=eq.\" + params.id;\n      }\n      console.log(\"IN GET ONE URL : \" + url);\n      return httpClient(url).then(function (_a) {\n          let json = _a.json;\n          console.log(\"RESOURCE GET ONE : \" + resource);\n          if(resource=== \"user_all\"){\n            json = JSON.parse(JSON.stringify(_a.json).replace(\"\\\"id\\\":\", \"\\\"addressid\\\":\")).map(resource => ({ ...resource, id: resource.addressid }));\n          }\n          console.log(\"JOSN GET ONE: \" + JSON.stringify(json));\n          return ({data: json});\n      });\n\n    },\n\n    getManyOr: function (resource, params) {\n        let prop;\n        let queryparam;\n        let queryValues = [];\n\n        for (prop in params) {\n            if (params.hasOwnProperty(prop)) {\n                let key = prop;\n                let valueArray = params[key];\n                for (queryparam in valueArray) {\n                    let queryString = key + \".eq.\" + valueArray[queryparam];\n                    queryValues.push(queryString);\n                }\n            }\n        }\n        let queryids = queryValues.join(\",\");\n        let queerystring = (!queryids) ? \"id=eq.-1\" : \"or=(\" + queryids + \")\";\n            if(resource===\"user_all\"){\n                queerystring = (!queryids) ? \"addressid=eq.-1\" : \"or=(\" + queryids + \")\";\n      }\n        let url = API_URL + \"/\" + resource + \"?\" + queerystring;\n        return httpClient(url).then(function (_a) {\n            var json = _a.json;\n            return ({data: json});\n        });\n    },\n};\n\nexport default myDataProvider\n"]},"metadata":{},"sourceType":"module"}