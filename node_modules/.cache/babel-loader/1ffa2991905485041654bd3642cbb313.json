{"ast":null,"code":"export default {\n  login: function (_a) {\n    var username = _a.username,\n        password = _a.password;\n    var request = new Request('rest/rpc/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email: username,\n        password: password\n      }),\n      headers: new Headers({\n        'Content-Type': 'application/json',\n        'Accept': 'application/vnd.pgrst.object+json',\n        'Prefer': 'return=representation'\n      })\n    });\n    return fetch(request).then(function (response) {\n      if (response.status < 200 || response.status >= 300) {\n        throw new Error(response.statusText);\n      }\n\n      return response.json();\n    }).then(function (data) {\n      localStorage.setItem('me', JSON.stringify(data));\n    });\n  },\n  logout: function (params) {\n    var request = new Request('rest/rpc/logout', {\n      method: 'POST',\n      headers: new Headers({\n        'Content-Type': 'application/json',\n        'Accept': 'application/vnd.pgrst.object+json',\n        'Prefer': 'return=representation'\n      })\n    });\n    return fetch(request).then(function (response) {\n      if (response.status < 200 || response.status >= 300) {\n        throw new Error(response.statusText);\n      }\n\n      return response.json();\n    }).then(function (data) {\n      localStorage.removeItem('me');\n    });\n  },\n  checkAuth: function (params) {\n    return localStorage.getItem('me') ? Promise.resolve() : Promise.reject();\n  },\n  checkError: function (error) {\n    var status = error.status;\n\n    if (status === 401 || status === 403) {\n      localStorage.removeItem('token');\n      return Promise.reject();\n    }\n\n    return Promise.resolve();\n  },\n  getPermissions: function (params) {\n    var _a;\n\n    var role = (_a = JSON.parse(localStorage.getItem('me'))) === null || _a === void 0 ? void 0 : _a.role;\n    return role ? Promise.resolve(role) : Promise.reject();\n  }\n};","map":{"version":3,"sources":["/home/codi/Entwicklung/workspace-webstorm/question_app_admin/node_modules/@raphiniert/ra-data-postgrest/esm/authProvider/index.js"],"names":["login","_a","username","password","request","Request","method","body","JSON","stringify","email","headers","Headers","fetch","then","response","status","Error","statusText","json","data","localStorage","setItem","logout","params","removeItem","checkAuth","getItem","Promise","resolve","reject","checkError","error","getPermissions","role","parse"],"mappings":"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","sourcesContent":["export default {\n    login: function (_a) {\n        var username = _a.username, password = _a.password;\n        var request = new Request('rest/rpc/login', {\n            method: 'POST',\n            body: JSON.stringify({ email: username, password: password }),\n            headers: new Headers({\n                'Content-Type': 'application/json',\n                'Accept': 'application/vnd.pgrst.object+json',\n                'Prefer': 'return=representation'\n            }),\n        });\n        return fetch(request)\n            .then(function (response) {\n            if (response.status < 200 || response.status >= 300) {\n                throw new Error(response.statusText);\n            }\n            return response.json();\n        })\n            .then(function (data) {\n            localStorage.setItem('me', JSON.stringify(data));\n        });\n    },\n    logout: function (params) {\n        var request = new Request('rest/rpc/logout', {\n            method: 'POST',\n            headers: new Headers({\n                'Content-Type': 'application/json',\n                'Accept': 'application/vnd.pgrst.object+json',\n                'Prefer': 'return=representation'\n            }),\n        });\n        return fetch(request)\n            .then(function (response) {\n            if (response.status < 200 || response.status >= 300) {\n                throw new Error(response.statusText);\n            }\n            return response.json();\n        })\n            .then(function (data) {\n            localStorage.removeItem('me');\n        });\n    },\n    checkAuth: function (params) { return (localStorage.getItem('me') ? Promise.resolve() : Promise.reject()); },\n    checkError: function (error) {\n        var status = error.status;\n        if (status === 401 || status === 403) {\n            localStorage.removeItem('token');\n            return Promise.reject();\n        }\n        return Promise.resolve();\n    },\n    getPermissions: function (params) {\n        var _a;\n        var role = (_a = JSON.parse(localStorage.getItem('me'))) === null || _a === void 0 ? void 0 : _a.role;\n        return role ? Promise.resolve(role) : Promise.reject();\n    },\n};\n"]},"metadata":{},"sourceType":"module"}